CREATE OR REPLACE TRIGGER UPDATE_SERVER_SALARY
AFTER UPDATE ON ORDER_DETAILS
FOR EACH ROW
BEGIN
    IF :NEW.TOTAL_BILL > 10000 THEN
        UPDATE SERVER
        SET SERVER_SALARY = SERVER_SALARY + 100 
        WHERE SERVER_ID = (SELECT SERVER_ID FROM ORDERS WHERE ORDER_ID = :NEW.ORDER_ID);
    END IF;
END;
/

SELECT * FROM ORDER_DETAILS;
SELECT * FROM SERVER;
SELECT * FROM ORDERS;

UPDATE ORDER_DETAILS
SET TOTAL_BILL = 2400
WHERE ORDER_ID = 730;

///

CREATE OR REPLACE TRIGGER DICOUNT_TRIGGER
BEFORE INSERT ON BILL
FOR EACH ROW
DECLARE
    DICOUNT_AMOUNT INTEGER;
BEGIN
    IF :NEW.PRICE > 10000 THEN
        DICOUNT_AMOUNT := :NEW.PRICE * 5 / 100;
        :NEW.PRICE := :NEW.PRICE - DICOUNT_AMOUNT;
    END IF;
END;
/

SELECT * FROM BILL;

INSERT INTO BILL (BILL_ID, PRICE, DECSRIPTION, DATE_B, ORDER_ID) VALUES (20030, 13300, 'llatte', '10/03/2022', 560);

